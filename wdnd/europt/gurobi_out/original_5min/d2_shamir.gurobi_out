Water Network: 2
Results of actual Hazen--Williams headloss constraint

*******************************************************************************
wdnmodel.mod

-------------------------------- Solving with gurobi --------------------------
Gurobi 12.0.3: Set parameter LogToConsole to value 1
  tech:outlev = 1
  tech:outlev_mp = 1
Set parameter Presolve to value 1
  pre:solve = 1
Set parameter Aggregate to value 1
  pre:aggregate = 1
Set parameter TimeLimit to value 300
  lim:time = 300
Set parameter NumericFocus to value 1
  alg:numericfocus = 1
Set parameter OBBT to value 0
  mip:obbt = 0
Set parameter ScaleFlag to value 1
  pre:scale = 1
Set parameter Method to value 2
  alg:method = 2
Set parameter NodeMethod to value 1
  mip:nodemethod = 1
Set parameter NonConvex to value 2
  qp:nonconvex = 2
Set parameter MIPFocus to value 1
  mip:focus = 1
Set parameter NLPHeur to value 1
  alg:nlpheur = 1
Set parameter VarBranch to value 0
  mip:varbranch = 0
Set parameter MIPGapAbs to value 1e-06
  mip:gapabs = 9.9999999999999995e-07
Set parameter MIPGap to value 1e-09
  mip:gap = 1.0000000000000001e-09
Set parameter FeasibilityTol to value 1e-06
  alg:feastol = 9.9999999999999995e-07
  cvt:pre:feastol = 9.9999999999999995e-07
  cvt:pre:feastolrel = 1.0000000000000001e-09
  sol:chk:feastol = 9.9999999999999995e-07
  sol:chk:feastolrel = 1.0000000000000001e-09
Set parameter Heuristics to value 0.05
  mip:heurfrac = 0.050000000000000003

AMPL MP initial flat model has 126 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  14 linear; 16 quadratic;
Algebraic expressions:  8 abs; 8 powconstexp;

AMPL MP final model has 158 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  22 linear; 16 quadratic;
Algebraic expressions:  8 abs; 8 powconstexp;


Set parameter InfUnbdInfo to value 1
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (linux64 - "Debian GNU/Linux 12 (bookworm)")

CPU model: INTEL(R) XEON(R) GOLD 6530, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 32 physical cores, 64 logical processors, using up to 32 threads

Non-default parameters:
TimeLimit  300
MIPGap  1e-09
MIPGapAbs  1e-06
Method  2
ScaleFlag  1
MIPFocus  1
NodeMethod  1
OBBT  0
VarBranch  0
InfUnbdInfo  1
NonConvex  2
NumericFocus  1
Presolve  1

Optimize a model with 22 rows, 158 columns and 150 nonzeros
Model fingerprint: 0x152ed00c
Model has 8 simple general constraints
  8 ABS
Model has 8 general nonlinear constraints (336 nonlinear terms)
Variable types: 158 continuous, 0 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [2e+00, 6e+02]
  Bounds range     [1e-01, 9e+06]
  RHS range        [3e-02, 1e+03]
Presolve model has 8 nlconstr
Added 232 variables to disaggregate expressions.
Presolve added 31 rows and 7 columns
Presolve time: 0.00s
Presolved: 693 rows, 406 columns, 1628 nonzeros
Presolved model has 120 bilinear constraint(s)
Presolved model has 8 nonlinear constraint(s)

Solving non-convex MINLP

Variable types: 398 continuous, 8 integer (8 binary)
Root barrier log...

Ordering time: 0.00s

Barrier statistics:
 AA' NZ     : 5.939e+03
 Factor NZ  : 7.410e+03
 Factor Ops : 1.433e+05 (less than 1 second per iteration)
 Threads    : 1

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   9.62498247e+09 -1.05422223e+10  1.16e+07 0.00e+00  5.23e+07     1s
   1   1.47089442e+09 -1.39748925e+09  2.67e+06 1.35e-13  1.05e+07     1s
   2   2.01973529e+07 -8.73781440e+07  3.39e+04 1.14e-13  1.97e+05     1s
   3   1.60062048e+06 -2.20605731e+06  2.41e+03 1.14e-13  1.00e+04     1s
   4   2.20136538e+05 -4.33260470e+05  1.14e+02 5.68e-14  8.73e+02     1s
   5   6.50214734e+04 -1.90650746e+04  6.01e+00 1.14e-13  8.93e+01     1s
   6   2.64510353e+04  7.93830315e+03  9.92e-01 9.71e-08  1.87e+01     1s
   7   2.58608171e+04  1.19946953e+04  9.33e-01 2.93e-08  1.42e+01     1s
   8   2.45924727e+04  1.19200254e+04  8.24e-01 9.10e-07  1.28e+01     1s
   9   2.32794053e+04  1.28446860e+04  6.94e-01 1.09e-06  1.06e+01     1s
  10   2.17719855e+04  1.57405033e+04  5.53e-01 1.20e-06  6.70e+00     1s
  11   2.32313868e+04  1.53486207e+04  4.43e-01 1.10e-06  7.83e+00     1s
  12   2.13810354e+04  1.64574431e+04  3.25e-01 5.75e-06  5.39e+00     1s
  13   2.12223509e+04  1.83929755e+04  3.02e-01 4.63e-06  4.37e+00     1s
  14   1.95815315e+04  1.80819388e+04  7.24e-02 2.67e-06  1.70e+00     1s
  15   1.93507731e+04  1.91545347e+04  4.52e-02 1.02e-06  5.67e-01     1s
  16   1.93314469e+04  1.93039966e+04  4.16e-02 1.01e-06  5.26e-01     1s
  17   1.93193813e+04  1.95780725e+04  3.96e-02 9.85e-07  4.87e-01     1s
  18   1.95718055e+04  2.14616864e+04  3.80e-02 9.68e-07  6.25e-01     1s
  19   1.96022957e+04  2.23080858e+04  3.75e-02 9.51e-07  6.15e-01     1s
  20   2.04501084e+04  2.06677056e+04  2.66e-02 8.33e-07  9.88e-01     1s
  21   2.10264780e+04  1.98499307e+04  1.96e-02 5.64e-07  1.59e+00     1s
  22   2.18417854e+04  2.24007870e+04  9.42e-03 2.38e-07  3.08e-01     1s
  23   2.20772253e+04  2.26009045e+04  5.95e-03 5.54e-08  1.55e-01     1s
  24   2.20760330e+04  2.39335437e+04  5.78e-03 5.24e-08  1.50e-01     1s
  25   2.21250945e+04  2.56197332e+04  5.64e-03 5.18e-08  1.20e-01     1s
  26   2.26438308e+04  2.41466191e+04  4.89e-03 4.77e-08  3.59e-01     1s
  27   2.48119397e+04  2.56716660e+04  1.89e-03 2.94e-08  2.78e-01     1s
  28   2.49454023e+04  2.58284530e+04  1.67e-03 1.64e-08  2.11e-01     1s
  29   2.49996259e+04  2.58696685e+04  1.59e-03 1.59e-08  1.97e-01     1s
  30   2.50006591e+04  2.59742404e+04  1.58e-03 1.59e-08  1.98e-01     1s
  31   2.49927210e+04  2.75098216e+04  1.56e-03 1.64e-08  2.07e-01     1s
  32   9.62498247e+09 -2.15982577e+11  1.16e+07 0.00e+00  9.34e+08     1s
  33   5.62068268e+08 -2.36907881e+10  1.63e+06 1.36e-12  1.23e+08     1s
  34   2.51360374e+06 -8.63663943e+08  6.35e+03 1.25e-12  1.18e+06     1s
  35   5.21380953e+05 -1.58625805e+08  7.78e+02 5.68e-13  1.90e+05     1s
  36   2.84683968e+05 -5.15228929e+07  1.29e+02 5.68e-13  5.43e+04     1s
  37   2.03585329e+05 -7.35693408e+06  9.10e+00 1.14e-12  7.39e+03     1s
  38   1.15827986e+05 -3.97712085e+05  9.47e-01 1.25e-12  5.04e+02     1s
  39   9.89548292e+04 -9.42823375e+04  7.67e-01 9.09e-12  2.02e+02     1s
  40   6.97423319e+04 -2.26535447e+04  4.41e-01 6.37e-12  9.52e+01     1s
  41   6.57856146e+04 -1.06077107e+04  4.02e-01 1.02e-11  8.04e+01     1s
  42   4.47230934e+04  8.61271524e+03  2.21e-01 2.43e-11  4.05e+01     1s
  43   2.37035576e+04  1.74062809e+04  3.84e-02 1.98e-07  7.07e+00     1s
  44   2.36718924e+04  2.00133885e+04  3.75e-02 1.74e-07  6.74e+00     1s
  45   2.34670507e+04  2.02489216e+04  3.02e-02 1.70e-07  5.83e+00     1s
  46   2.27716494e+04  2.10962502e+04  8.65e-03 4.75e-07  2.22e+00     1s
  47   2.26586651e+04  2.23508996e+04  5.79e-03 6.72e-08  9.34e-01     1s
  48   2.26582341e+04  2.31914675e+04  5.77e-03 6.59e-08  9.28e-01     1s
  49   2.27379343e+04  2.38053258e+04  5.67e-03 6.55e-08  9.72e-01     1s
  50   2.30128985e+04  2.47446395e+04  5.18e-03 2.82e-09  9.40e-01     1s
  51   2.40673695e+04  2.44175522e+04  3.31e-03 1.42e-09  1.11e+00     1s
  52   2.51486477e+04  2.53276164e+04  1.45e-03 1.54e-08  6.62e-01     1s
  53   2.51521924e+04  2.72837962e+04  1.44e-03 3.31e-09  5.01e-01     1s
  54   2.51721961e+04  2.99831099e+04  1.43e-03 3.38e-09  4.95e-01     1s
  55   2.59717150e+04  2.91440938e+04  1.25e-03 3.17e-09  6.97e-01     1s
  56   2.62119763e+04  2.69146823e+04  1.18e-03 1.30e-08  1.14e+00     1s
  57   2.73354284e+04  2.75094634e+04  9.71e-04 6.31e-09  1.58e+00     1s
  58   2.87780066e+04  2.92235013e+04  6.77e-04 1.10e-08  1.60e+00     1s
  59   2.98440783e+04  3.00276157e+04  2.89e-04 6.59e-08  8.91e-01     1s
  60   3.00139427e+04  3.49934948e+04  2.26e-04 8.46e-08  9.73e-02     1s
  61   3.00192227e+04  3.58981669e+04  2.20e-04 8.45e-08  6.65e-02     2s
  62   3.00193459e+04  3.90466773e+04  2.30e-04 8.45e-08  6.88e-02     2s
  63   3.00223291e+04  3.72287614e+04  2.30e-04 8.45e-08  6.98e-02     2s
  64   3.00811232e+04  3.63249722e+04  2.29e-04 7.90e-08  1.15e-01     2s
  65   3.18080358e+04  3.85637955e+04  1.85e-04 6.78e-08  1.76e-01     2s
  66   3.44049017e+04  3.72457945e+04  1.19e-04 3.46e-08  8.69e-01     2s
  67   3.57035196e+04  3.71384310e+04  8.62e-05 2.34e-08  1.16e+00     2s
  68   3.68913617e+04  3.83060795e+04  5.58e-05 4.81e-08  5.71e-01     2s
  69   3.70024914e+04  4.05215177e+04  5.35e-05 5.51e-08  7.44e-02     2s
  70   3.69978254e+04  4.07019071e+04  3.76e-05 3.51e-08  1.39e-02     2s
  71   3.69981226e+04  4.64715142e+04  8.17e-04 2.16e-07  1.48e-02     2s
  72   3.70187687e+04  4.87721104e+04  1.84e-03 1.48e-07  1.42e-02     2s
  73   3.92025349e+04  4.21200737e+04  2.02e-03 1.26e-07  1.22e+00     2s
  74   3.96714908e+04  4.45012810e+04  1.93e-03 1.57e-07  9.98e-01     2s
  75   4.11237825e+04  4.76911631e+04  1.64e-03 1.26e-07  5.44e-01     2s
  76   4.35611714e+04  4.51204244e+04  1.15e-03 1.17e-07  2.12e+00     2s
  77   4.47798903e+04  4.56023998e+04  9.10e-04 5.55e-08  2.25e+00     2s
  78   4.53888940e+04  4.50946058e+04  6.19e-04 1.10e-07  3.70e+00     2s
  79   4.53878177e+04  4.51350983e+04  6.14e-04 1.07e-07  3.67e+00     2s
  80   4.53377824e+04  4.51439931e+04  5.91e-04 1.04e-07  3.59e+00     2s

Barrier performed 80 iterations in 1.76 seconds (0.04 work units)
Sub-optimal termination - objective 4.53377824e+04


Root relaxation: objective 7.125358e+04, 590 iterations, 1.05 seconds (0.03 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 71253.5833    0   15          - 71253.5833      -     -    1s
     0     0 71253.5833    0   15          - 71253.5833      -     -    1s
     0     0 71253.5833    0   18          - 71253.5833      -     -    1s
     0     0 71253.5833    0   18          - 71253.5833      -     -    1s
     0     0 71253.5833    0   18          - 71253.5833      -     -    2s
     0     0 71253.5833    0   18          - 71253.5833      -     -    2s
     0     0 71253.5833    0   18          - 71253.5833      -     -    2s
     0     0 71253.5833    0   18          - 71253.5833      -     -    2s
     0     0 71253.5833    0   18          - 71253.5833      -     -    2s
H    0     0                    1716841.4567 71253.5833  95.8%     -    3s
H    0     0                    678361.00081 71253.5833  89.5%     -    3s
     0     2 71253.5833    0   18 678361.001 71253.5833  89.5%     -    3s
H    1     4                    470455.48984 71253.5833  84.9%   0.0    3s
H    6     6                    425706.45312 73259.7609  82.8%  23.5    4s
H   46    32                    425706.45304 115368.589  72.9%  30.6    4s
    95   119 233215.079    8   14 425706.453 116441.439  72.6%  29.8    5s
  4052  1443 infeasible   29      425706.453 254386.872  40.2%  13.6   10s
H 6893  1781                    422399.78732 259720.692  38.5%  13.6   11s
  6906  1782 327388.141   20    4 422399.787 259720.692  38.5%  13.6   15s
H 8098  1608                    421160.21510 316801.205  24.8%  13.9   17s
 12110   851     cutoff   36      421160.215 365139.065  13.3%  12.7   20s
H13745   976                    421160.21500 376954.526  10.5%  12.5   20s
H19246  2369                    421160.21493 398024.064  5.49%  11.7   25s
H19948  3173                    421160.21487 400568.683  4.89%  11.5   25s
H23102  3801                    418617.23197 400959.211  4.22%  10.6   27s
H24439  3944                    418617.23156 400959.211  4.22%  10.3   27s
 27510  5852 404929.405   41   10 418617.232 402764.794  3.79%   9.8   30s
 33397  9436 413561.134   59   13 418617.232 403048.673  3.72%   8.8   35s
 39283 13925 413037.469   72    7 418617.232 403138.797  3.70%   7.9   40s
 45108 18634 415757.670  163    3 418617.232 403205.949  3.68%   7.2   45s
 52484 22449 411593.149   96    5 418617.232 403232.275  3.68%   6.4   50s
 61582 26522 416200.063  110    3 418617.232 403232.628  3.68%   5.7   55s
 68399 30270 407175.704   70   13 418617.232 403234.403  3.67%   5.3   60s
 79202 35357 403249.241   94    3 418617.232 403234.934  3.67%   4.7   65s
 92936 40404 417859.763  147   17 418617.232 403235.006  3.67%   4.1   71s
 99967 41511 infeasible  205      418617.232 403235.014  3.67%   4.0   75s
 113011 43089          -   80      418617.232 403235.014  3.67%   3.6   82s
 123961 43912          -   88      418617.232 403235.014  3.67%   3.3   86s
 133089 44037 403241.792   88    1 418617.232 403235.014  3.67%   3.1   92s
 140945 44931 403241.934   77    1 418617.232 403235.014  3.67%   3.0   97s
 147433 47496 407869.571   97    8 418617.232 403235.014  3.67%   2.9  101s
 153075 50224 411223.278  135    4 418617.232 403235.014  3.67%   2.8  105s
 157475 52748 411223.369  146    4 418617.232 403235.014  3.67%   2.8  111s
 161487 55155 411222.998  153    4 418617.232 403235.014  3.67%   2.8  115s
 165458 58789 411223.436  170    4 418617.232 403235.014  3.67%   2.7  120s
H168507 61015                    418617.23148 403235.014  3.67%   2.7  123s
 171613 63831 411223.437  179    4 418617.231 403235.014  3.67%   2.6  125s
 179199 66549 417501.668   92    4 418617.231 403235.014  3.67%   2.6  130s
 182889 68699 417774.981  175    3 418617.231 403235.014  3.67%   2.5  135s
H183079 49836                    417344.84568 403235.014  3.38%   2.5  135s
H186059 52911                    417344.84563 403235.014  3.38%   2.5  137s
 191900 55348 infeasible  180      417344.846 403235.014  3.38%   2.5  141s
 198180 57677 416497.001  177    6 417344.846 403235.014  3.38%   2.5  145s
 208098 61179 412523.251  117    8 417344.846 403235.014  3.38%   2.4  151s
 213845 63831 infeasible  188      417344.846 403235.014  3.38%   2.4  155s
 219391 66458 403244.639   95    2 417344.846 403235.014  3.38%   2.4  160s
 224709 70401 411445.413  133    4 417344.846 403235.014  3.38%   2.3  165s
 231106 71883 403244.634   85    2 417344.846 403235.014  3.38%   2.3  170s
 239491 75441 416508.487  193    9 417344.846 403235.014  3.38%   2.3  176s
 247533 78227 infeasible  232      417344.846 403235.014  3.38%   2.2  180s
 260001 82422 infeasible   99      417344.846 403235.014  3.38%   2.2  186s
 265699 84474 414168.777  138   10 417344.846 403235.014  3.38%   2.2  190s
 272303 87255 415833.584  150   11 417344.846 403235.014  3.38%   2.1  197s
 278845 89430 416492.938  238    2 417344.846 403235.014  3.38%   2.1  202s
 285961 91799 411303.947  122    3 417344.846 403235.014  3.38%   2.1  207s
 289393 92942 410344.536   97    9 417344.846 403235.014  3.38%   2.1  211s
 291625 95267 416520.127  259   11 417344.846 403235.014  3.38%   2.1  216s
 295968 97034 413127.675  122    8 417344.846 403235.014  3.38%   2.1  221s
 300898 98889 416530.380  302   10 417344.846 403235.014  3.38%   2.1  225s
 305916 102500 410982.258  126    5 417344.846 403235.014  3.38%   2.1  230s
 316516 106654 410982.074  180    4 417344.846 403235.014  3.38%   2.1  236s
 324584 108616 416516.537  235   13 417344.846 403235.014  3.38%   2.0  241s
 329254 110814 infeasible  261      417344.846 403235.014  3.38%   2.1  247s
 335654 113971 410822.163  125    5 417344.846 403235.014  3.38%   2.1  252s
 338307 116154 410969.730  135    4 417344.846 403235.014  3.38%   2.1  255s
 345034 119677          -   83      417344.846 403235.014  3.38%   2.1  260s
 351036 122037 infeasible  263      417344.846 403235.014  3.38%   2.0  266s
 357793 124404 411057.530  103    9 417344.846 403235.014  3.38%   2.0  270s
 363940 127545     cutoff   96      417344.846 403235.014  3.38%   2.0  275s
 372832 130983 infeasible  146      417344.846 403235.014  3.38%   2.0  282s
 375229 132987 416506.308  185    7 417344.846 403235.014  3.38%   2.0  285s
 384362 136662 412522.840  116   12 417344.846 403235.014  3.38%   2.0  291s
 390859 140093 infeasible  199      417344.846 403235.014  3.38%   2.0  296s
 398820 142188 infeasible  227      417344.846 403235.014  3.38%   1.9  300s

Cutting planes:
  Cover: 1
  Implied bound: 18
  Flow cover: 1
  RLT: 5
  Relax-and-lift: 15

Explored 400000 nodes (779381 simplex iterations) in 300.08 seconds (23.44 work units)
Thread count was 32 (of 64 available processors)

Solution count 10: 417345 417345 418617 ... 1.71684e+06

Time limit reached
Best objective 4.173448456287e+05, best bound 4.032350136522e+05, gap 3.3809%
Gurobi 12.0.3: time limit, feasible solution; objective 417344.8456
779381 simplex iterations
105 barrier iterations
400000 branching nodes
absmipgap=14109.8, relmipgap=0.0338086
eps :=
1 2   7.11687e-08
2 3   7.11687e-08
2 4   7.11687e-08
3 5   7.11687e-08
4 5   7.11687e-08
4 6   7.11687e-08
5 7   7.11687e-08
6 7   7.11687e-08
;

*******************************************************************************

Constraints violation:


Sum of constraints violation: 3.7704875810451455e-07
*******************************************************************************

*******************************************************************************

Absolute and relative violations between original and approximation constraint 2:

+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| Constraint ID   |   flow value |   Original Con Violation |   Approx Con Violation |   Absolute Violation |   Relative Violation |
+=================+==============+==========================+========================+======================+======================+
| 1,2             |  0.31109     |                  0       |                0       |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,3             |  0.147299    |                  2e-08   |                2e-08   |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,4             |  0.136021    |                 -2e-08   |               -2e-08   |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 3,5             |  0.119529    |                  2e-08   |                2e-08   |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 4,5             |  0.000145192 |                 -0       |               -0       |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 4,6             |  0.102546    |                 -2e-08   |               -2e-08   |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 5,7             |  0.0446743   |                  4e-08   |                4e-08   |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 6,7             |  0.0108757   |                 -2.6e-07 |               -2.6e-07 |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+

Sum of violation of original headloss constraint: 3.770476557640734e-07
Sum of violation of approx headloss constraint: 3.770476206810258e-07

Con2 sum of absolute violation between original function and approximate function: 3.597122599785507e-14
Con2 sum of relative violation between original function and approximate function: 7.610257001437686e-15
*******************************************************************************

Total cost using gurobi: 417344.8456286669
gurobi solve time: 300.43 seconds
*******************************************************************************

