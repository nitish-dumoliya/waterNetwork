Water Network: 7
Results smooth approximation 2 of Hazen--Williams headloss constraint using relative error

*******************************************************************************

-------------------------------- Solving with gurobi --------------------------
Gurobi 12.0.3: Set parameter LogToConsole to value 1
  tech:outlev = 1
  tech:outlev_mp = 1
Set parameter Presolve to value 1
  pre:solve = 1
Set parameter Aggregate to value 1
  pre:aggregate = 1
Set parameter TimeLimit to value 600
  lim:time = 600
Set parameter NumericFocus to value 1
  alg:numericfocus = 1
Set parameter OBBT to value 0
  mip:obbt = 0
Set parameter ScaleFlag to value 1
  pre:scale = 1
Set parameter Method to value 2
  alg:method = 2
Set parameter NodeMethod to value 1
  mip:nodemethod = 1
Set parameter NonConvex to value 2
  qp:nonconvex = 2
Set parameter MIPFocus to value 1
  mip:focus = 1
Set parameter NLPHeur to value 1
  alg:nlpheur = 1
Set parameter VarBranch to value 0
  mip:varbranch = 0
Set parameter MIPGapAbs to value 1e-05
  mip:gapabs = 1.0000000000000001e-05
Set parameter MIPGap to value 1e-06
  mip:gap = 9.9999999999999995e-07
Set parameter FeasibilityTol to value 1e-05
  alg:feastol = 1.0000000000000001e-05
  cvt:pre:feastol = 1.0000000000000001e-05
  cvt:pre:feastolrel = 9.9999999999999995e-07
  sol:chk:feastol = 1.0000000000000001e-05
  sol:chk:feastolrel = 9.9999999999999995e-07

AMPL MP initial flat model has 379 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  53 linear; 102 quadratic;
Algebraic expressions:  27 div; 54 powconstexp;

AMPL MP final model has 563 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  80 linear; 102 quadratic;
Algebraic expressions:  27 div; 54 powconstexp;


Set parameter InfUnbdInfo to value 1
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (linux64 - "Debian GNU/Linux 12 (bookworm)")

CPU model: INTEL(R) XEON(R) GOLD 6530, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 32 physical cores, 64 logical processors, using up to 32 threads

Non-default parameters:
TimeLimit  600
FeasibilityTol  1e-05
MIPGap  1e-06
MIPGapAbs  1e-05
Method  2
ScaleFlag  1
MIPFocus  1
NodeMethod  1
OBBT  0
VarBranch  0
InfUnbdInfo  1
NonConvex  2
NumericFocus  1
Presolve  1

Optimize a model with 80 rows, 563 columns and 497 nonzeros
Model fingerprint: 0x56d00e59
Model has 27 general nonlinear constraints (729 nonlinear terms)
Variable types: 563 continuous, 0 integer (0 binary)
Coefficient statistics:
  Matrix range     [2e-08, 2e+00]
  Objective range  [5e-01, 3e+02]
  Bounds range     [4e-13, 6e+04]
  RHS range        [7e-04, 7e+02]
Presolve model has 27 nlconstr
Added 825 variables to disaggregate expressions.
Presolve removed 8 rows and 167 columns
Presolve time: 0.01s
Presolved: 2427 rows, 1222 columns, 5678 nonzeros
Presolved model has 375 bilinear constraint(s)
Presolved model has 81 nonlinear constraint(s)

Solving non-convex MINLP

Variable types: 1222 continuous, 0 integer (0 binary)
Root barrier log...

Ordering time: 0.00s

Barrier statistics:
 AA' NZ     : 1.000e+00
 Factor NZ  : 2.500e+01
 Factor Ops : 2.700e+01 (less than 1 second per iteration)
 Threads    : 1

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   2.40022291e+06  5.55834233e+04  8.55e+02 0.00e+00  5.47e+03     2s
   1   3.09612556e+05 -3.25735576e+04  7.78e+01 3.20e+00  6.70e+02     2s
   2   9.17736595e+04  4.99350112e+04  6.82e-13 5.23e-01  6.83e+01     2s
   3   6.15037222e+04  5.68525644e+04  3.58e-12 1.25e-01  7.91e+00     2s
   4   5.81203613e+04  5.76516853e+04  1.11e-12 1.33e-02  8.05e-01     2s
   5   5.78643788e+04  5.78425583e+04  1.17e-12 9.01e-05  3.44e-02     2s
   6   5.78462812e+04  5.78462589e+04  2.27e-13 5.68e-14  3.44e-05     2s
   7   5.78462631e+04  5.78462631e+04  1.71e-13 8.53e-14  3.44e-11     2s

Barrier solved model in 7 iterations and 1.58 seconds (0.06 work units)
Optimal objective 5.78462631e+04

Extra simplex iterations after uncrush: 321

Root relaxation: objective 5.784626e+04, 346 iterations, 0.00 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 57846.2631    0  422          - 57846.2631      -     -    1s
     0     0 60267.4509    0  403          - 60267.4509      -     -    1s
     0     0 60267.4509    0  403          - 60267.4509      -     -    1s
     0     0 60267.4509    0  403          - 60267.4509      -     -    1s
     0     0 60267.4509    0  403          - 60267.4509      -     -    1s
     0     2 60267.4509    0  403          - 60267.4509      -     -    7s
  2465  3089 60267.4509   44  306          - 60267.4509      -   1.6   10s
  5992  4172 60267.4509   23    0          - 60267.4509      -   3.3   34s
  5993  4176 60570.6393   15  366          - 60570.6393      -   3.4   38s
  7717  4947 63206.0899   48  196          - 60570.6393      -   3.8   40s
 17847  4427 infeasible  291               - 60570.6393      -   3.8   45s
 29872  5804 infeasible  606               - 60570.6393      -   3.1   50s
 43551  7185 infeasible  939               - 60570.6393      -   2.7   55s
 57286  8240 infeasible 1257               - 60570.6393      -   2.3   60s
 68755  8790 infeasible 1506               - 60570.6393      -   2.0   65s
 77250  9124 infeasible 1675               - 60570.6393      -   1.8   70s
 89887  9368 infeasible 1918               - 60570.6393      -   1.6   75s
 102491  9535 infeasible 2164               - 60570.6393      -   1.4   80s
 113719  9585 infeasible 2371               - 60570.6393      -   1.3   85s
 128718  9667 infeasible 2637               - 60570.6393      -   1.1   90s
 144109  9721 infeasible 2910               - 60570.6393      -   1.0   95s
 156350  9846 63206.0899 3131  175          - 60570.6393      -   1.0  100s
 171889 10297 infeasible 3429               - 60570.6393      -   0.9  106s
 183557 10704 infeasible 3649               - 60570.6393      -   0.9  111s
 194536 11105 infeasible 3867               - 60570.6393      -   0.8  115s
 202152 11384 infeasible 4007               - 60570.6393      -   0.8  120s
 213374 11829 65463.7318 4034  170          - 60570.6393      -   0.8  125s
 228437 12194 65463.7318 4034  132          - 60570.6393      -   0.7  131s
 239135 12238 65463.7318 4034  129          - 60570.6393      -   0.7  136s
 250294 12237 infeasible 4035               - 60570.6393      -   0.7  141s
 261178 12176 infeasible 4035               - 60570.6393      -   0.7  145s
 269776 12180 infeasible 4035               - 60570.6393      -   0.6  150s
 283928 12216 infeasible 4035               - 60570.6393      -   0.6  156s
 294587 12232 infeasible 4035               - 60570.6393      -   0.6  160s
 305212 12233 infeasible 4035               - 60570.6393      -   0.6  165s
 316446 12482 infeasible  106               - 60570.6393      -   0.6  171s
 326456 12662 60570.6393   53  206          - 60570.6393      -   0.6  175s
 341235 12734 infeasible  308               - 60570.6393      -   0.5  181s
 351323 12842 60577.8702  367  226          - 60570.6393      -   0.5  185s
 364905 13021 60577.8702  429  231          - 60570.6393      -   0.5  190s
 375954 13173 60577.8702  481  229          - 60570.6393      -   0.5  195s
 389985 13262 infeasible  742               - 60570.6393      -   0.5  201s
 400454 13378 infeasible  956               - 60570.6393      -   0.5  205s
 411352 13638 infeasible 1194               - 60570.6393      -   0.5  211s
 421214 13776 infeasible 1410               - 60570.6393      -   0.5  215s
 427766 13838 infeasible 1554               - 60570.6393      -   0.5  221s
 439846 14017 infeasible 1812               - 60570.6393      -   0.5  233s
 443803 14065 infeasible 1895               - 60570.6393      -   0.5  236s
 454279 14235 infeasible 2112               - 60570.6393      -   0.5  241s
 464525 14340 infeasible 2331               - 60570.6393      -   0.5  246s
 470509 14394 infeasible 2476               - 60570.6393      -   0.5  250s
 480402 14440 infeasible 2693               - 60570.6393      -   0.5  255s
 490236 14530 infeasible 2912               - 60570.6393      -   0.5  260s
 497763 14649 infeasible 3068               - 60570.6393      -   0.5  266s
 504789 14733 infeasible 3215               - 60570.6393      -   0.5  271s
 515316 14953 infeasible 3437               - 60570.6393      -   0.5  277s
 522003 15017 infeasible 3584               - 60570.6393      -   0.5  281s
 532656 15132 infeasible 3804               - 60570.6393      -   0.5  286s
 539692 15233 infeasible 3950               - 60570.6393      -   0.5  290s
 550395 15378 infeasible 4180               - 60570.6393      -   0.5  296s
 557938 15429 infeasible 4335               - 60570.6393      -   0.5  300s
 567407 15602 60578.0719 4452  192          - 60570.6393      -   0.5  306s
 578441 15638 69945.8450 4461  144          - 60570.6393      -   0.5  311s
 589354 15697 infeasible  119               - 60570.6393      -   0.5  316s
 597347 15734 infeasible  274               - 60570.6393      -   0.5  320s
 608148 15812 62595.2128  486  220          - 60570.6393      -   0.5  325s
 618405 15894 infeasible  696               - 60570.6393      -   0.5  330s
 628817 16115 infeasible  906               - 60570.6393      -   0.5  335s
 639380 16229 infeasible 1121               - 60570.6393      -   0.5  341s
 646884 16373 infeasible 1271               - 60570.6393      -   0.5  346s
 653982 16483 infeasible 1414               - 60570.6393      -   0.5  350s
 664240 16645 infeasible 1619               - 60570.6393      -   0.5  356s
 674671 16823 infeasible 1834               - 60570.6393      -   0.5  361s
 685071 16986 infeasible 2047               - 60570.6393      -   0.5  366s
 692035 17072 62595.2128 2191  219          - 60570.6393      -   0.5  370s
 701415 17140 62595.2128 2378  220          - 60570.6393      -   0.4  375s
 712698 17199 infeasible 2593               - 60570.6393      -   0.4  381s
 720288 17207 infeasible 2735               - 60570.6393      -   0.4  385s
 731913 17208 infeasible 2949               - 60570.6393      -   0.4  390s
 739971 17301 62595.2128 3100  220          - 60570.6393      -   0.4  396s
 746852 17347 infeasible 3227               - 60570.6393      -   0.4  400s
 757542 17375 infeasible 3439               - 60570.6393      -   0.4  405s
 767997 17571 infeasible 3623               - 60570.6393      -   0.4  410s
 777380 17829 63123.9938 3659  215          - 60570.6393      -   0.4  416s
 781986 17911 63123.9938 3674  216          - 60570.6393      -   0.4  420s
 791234 18214 63402.3503 3701  210          - 60570.6393      -   0.4  425s
 800339 18545 63402.3503 3737  214          - 60570.6393      -   0.4  432s
 806924 18757 infeasible 3766               - 60570.6393      -   0.4  436s
 812758 18963 infeasible 3790               - 60570.6393      -   0.4  440s
 821732 19303 63402.3503 3827  211          - 60570.6393      -   0.4  445s
 828546 19606 62595.2128  112  220          - 60570.6393      -   0.4  451s
 838173 19737 infeasible  308               - 60570.6393      -   0.4  456s
 844487 19827 infeasible  445               - 60570.6393      -   0.4  460s
 854249 19983 64461.0108  661  200          - 60570.6393      -   0.4  466s
 864077 20203 64461.0108  879  199          - 60570.6393      -   0.4  471s
 870165 20350 infeasible 1025               - 60570.6393      -   0.4  475s
 878339 20478 64461.0108 1213  199          - 60570.6393      -   0.4  481s
 884196 20574 infeasible 1338               - 60570.6393      -   0.4  485s
 898543 21073 infeasible 1629               - 60570.6393      -   0.4  490s
 912995 21337 64708.2464 1885  198          - 60570.6393      -   0.4  495s
 929465 21824 64708.2464 2247  198          - 60570.6393      -   0.4  500s
 945860 22056 64708.2464 2587  198          - 60570.6393      -   0.4  505s
 960375 22202 64708.2464 2885  198          - 60570.6393      -   0.4  510s
 981202 22396 infeasible 3317               - 60570.6393      -   0.4  515s
 998636 22544 infeasible 3677               - 60570.6393      -   0.4  520s
 1012735 22619 infeasible 3940               - 60570.6393      -   0.4  525s
 1034154 22697 infeasible 4362               - 60570.6393      -   0.4  530s
 1048212 22761 infeasible 4647               - 60570.6393      -   0.4  535s
 1066296 22872 infeasible 4987               - 60570.6393      -   0.4  540s
 1084034 23090 infeasible 5326               - 60570.6393      -   0.5  545s
 1098109 23235 infeasible 5607               - 60570.6393      -   0.5  550s
 1112619 23396 infeasible 5891               - 60570.6393      -   0.5  555s
 1128958 23524 infeasible 6195               - 60570.6393      -   0.5  560s
 1149773 23552 infeasible 6577               - 60570.6393      -   0.5  565s
 1167267 23635 infeasible 6897               - 60570.6393      -   0.5  570s
 1184239 23828 infeasible 7237               - 60570.6393      -   0.5  575s
 1198255 23943 infeasible 7520               - 60570.6393      -   0.5  583s
 1204549 23993 infeasible 7646               - 60570.6393      -   0.5  585s
 1221989 24082 infeasible 7989               - 60570.6393      -   0.5  590s
 1243100 24165 infeasible 8391               - 60570.6393      -   0.5  595s
 1260199 24244 60570.8221  237  201          - 60570.6393      -   0.5  600s

Explored 1260243 nodes (597981 simplex iterations) in 600.06 seconds (36.76 work units)
Thread count was 32 (of 64 available processors)

Solution count 0

Time limit reached
Best objective -, best bound 6.057063933357e+04, gap -
Gurobi 12.0.3: time limit, without a feasible solution
597981 simplex iterations
14 barrier iterations
1.26024e+06 branching nodes
eps [*,*] (tr)
:         0             1             2             3             4         :=
1    1.16517e-06    .             .             .             .
2     .            9.932e-07      .             .             .
3     .             .            1.4685e-06     .             .
4    3.3389e-06     .             .             .             .
5     .             .             .             .            1.30946e-06
8     .            3.82269e-06    .             .             .
11    .             .            3.76909e-06    .             .
13    .             .            2.5968e-06     .             .
17    .             .             .            1.67109e-06    .
18    .             .             .            1.27654e-06    .

:         5             6             7             8             9         :=
6    1.85172e-06    .             .             .             .
7     .            4.90959e-06    .             .             .
8     .             .            2.20303e-06    .             .
10    .             .             .             .            2.11724e-06
12    .             .             .             .            6.34976e-06
21   1.79702e-06    .             .             .             .
25    .             .             .             .            2.2116e-06
29    .             .            3.2156e-06     .             .
30    .             .             .            4.53592e-06    .

:        11            12            13            14            15         :=
11    .            1.52998e-06    .             .             .
14    .             .            1.59009e-06    .             .
15   2.62445e-06    .             .             .             .
16    .             .             .             .            1.5994e-06
17    .             .             .             .            1.37063e-06
23    .             .             .            2.31581e-06    .

:        18            21            22            23            24         :=
13    .             .            1.66809e-06    .             .
19   1.35819e-06    .             .             .            1.40226e-06
20    .            4.47049e-06    .             .             .
22    .             .             .            2.42412e-06    .
24   1.25884e-06    .             .             .             .

:        26            29         :=
9    2.78767e-06    .
26    .            1.63239e-06
27   2.56121e-06    .
28   2.18903e-06    .
;

*******************************************************************************

Constraints violation:


Sum of constraints violation: 26124.86266305898
*******************************************************************************

*******************************************************************************

Absolute and relative violations between original and approximation constraint 2:

+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| Constraint ID   |   flow value |   Original Con Violation |   Approx Con Violation |   Absolute Violation |   Relative Violation |
+=================+==============+==========================+========================+======================+======================+
| 0,1             |   0          |             715.56       |           715.56       |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 0,4             |   0          |             715.56       |           715.56       |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 1,2             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 1,8             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,3             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,11            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,13            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 3,17            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 3,18            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 4,5             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 5,6             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 6,7             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 7,8             |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 7,29            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 8,30            |   0.00323968 |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 9,12            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 12,11           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 14,23           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 15,17           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 18,19           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 18,24           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 21,20           |   0.00069147 |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 26,9            |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 5,21            |   0.00393115 |              -0.0936466  |            -0.0936466  |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 9,10            |   0.00328763 |              -0.0496397  |            -0.0496397  |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 9,25            |   0.00325167 |              -0.0448656  |            -0.0448656  |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 11,15           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 13,14           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 15,16           |   0.00328763 |              -0.00693429 |            -0.00693429 |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 22,13           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 23,22           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 24,19           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 26,27           |   0.00321508 |              -0.0334794  |            -0.0334794  |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 26,28           |   0.00161385 |              -0.0124941  |            -0.0124941  |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 29,26           |   0          |               0          |             0          |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+

Sum of violation of original headloss constraint: 1431.3610596689712
Sum of violation of approx headloss constraint: 1431.3610596689712

Con2 sum of absolute violation between original function and approximate function: 9.573938863915998e-15
Con2 sum of relative violation between original function and approximate function: 5.223095950533626e-13
*******************************************************************************

Total cost using gurobi: 55583.42331599999
gurobi solve time: 600.35 seconds
*******************************************************************************

