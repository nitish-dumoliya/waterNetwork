Water Network: 6
Results smooth approximation 2 of Hazen--Williams headloss constraint using relative error

*******************************************************************************

-------------------------------- Solving with gurobi --------------------------
Gurobi 12.0.3: Set parameter LogToConsole to value 1
  tech:outlev = 1
  tech:outlev_mp = 1
Set parameter Presolve to value 1
  pre:solve = 1
Set parameter Aggregate to value 1
  pre:aggregate = 1
Set parameter TimeLimit to value 600
  lim:time = 600
Set parameter NumericFocus to value 1
  alg:numericfocus = 1
Set parameter OBBT to value 0
  mip:obbt = 0
Set parameter ScaleFlag to value 1
  pre:scale = 1
Set parameter Method to value 2
  alg:method = 2
Set parameter NodeMethod to value 1
  mip:nodemethod = 1
Set parameter NonConvex to value 2
  qp:nonconvex = 2
Set parameter MIPFocus to value 1
  mip:focus = 1
Set parameter NLPHeur to value 1
  alg:nlpheur = 1
Set parameter VarBranch to value 0
  mip:varbranch = 0
Set parameter MIPGapAbs to value 1e-05
  mip:gapabs = 1.0000000000000001e-05
Set parameter MIPGap to value 1e-06
  mip:gap = 9.9999999999999995e-07
Set parameter FeasibilityTol to value 1e-05
  alg:feastol = 1.0000000000000001e-05
  cvt:pre:feastol = 1.0000000000000001e-05
  cvt:pre:feastolrel = 9.9999999999999995e-07
  sol:chk:feastol = 1.0000000000000001e-05
  sol:chk:feastolrel = 9.9999999999999995e-07

AMPL MP initial flat model has 397 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  61 linear; 147 quadratic;
Algebraic expressions:  42 div; 84 powconstexp;

AMPL MP final model has 670 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  103 linear; 147 quadratic;
Algebraic expressions:  42 div; 84 powconstexp;


Set parameter InfUnbdInfo to value 1
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (linux64 - "Debian GNU/Linux 12 (bookworm)")

CPU model: INTEL(R) XEON(R) GOLD 6530, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 32 physical cores, 64 logical processors, using up to 32 threads

Non-default parameters:
TimeLimit  600
FeasibilityTol  1e-05
MIPGap  1e-06
MIPGapAbs  1e-05
Method  2
ScaleFlag  1
MIPFocus  1
NodeMethod  1
OBBT  0
VarBranch  0
InfUnbdInfo  1
NonConvex  2
NumericFocus  1
Presolve  1

Optimize a model with 103 rows, 670 columns and 580 nonzeros
Model fingerprint: 0xd42421a2
Model has 42 general nonlinear constraints (861 nonlinear terms)
Variable types: 670 continuous, 0 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [3e+02, 3e+03]
  Bounds range     [2e-06, 1e+04]
  RHS range        [3e-02, 1e+04]
Presolve model has 42 nlconstr
Added 987 variables to disaggregate expressions.
Presolve removed 23 rows and 256 columns
Presolve time: 0.01s
Presolved: 3146 rows, 1402 columns, 7540 nonzeros
Presolved model has 441 bilinear constraint(s)
Presolved model has 126 nonlinear constraint(s)

Solving non-convex MINLP

Variable types: 1402 continuous, 0 integer (0 binary)
Root barrier log...

Ordering time: 0.00s

Barrier statistics:
 AA' NZ     : 0.000e+00
 Factor NZ  : 2.100e+01
 Factor Ops : 2.100e+01 (less than 1 second per iteration)
 Threads    : 1

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   7.94254489e+08  0.00000000e+00  2.16e+04 0.00e+00  1.54e+06     1s
   1   9.23779594e+07  1.35499109e+07  8.64e-12 9.25e+01  1.38e+05     1s
   2   4.48547936e+07  3.45281279e+07  2.29e-10 2.11e+01  1.95e+04     1s
   3   3.43837229e+07  3.40084116e+07  2.32e-10 4.30e-01  6.74e+02     1s
   4   3.42017075e+07  3.42012116e+07  1.46e-10 9.09e-13  7.87e-01     1s
   5   3.42014594e+07  3.42014593e+07  5.46e-12 9.09e-13  8.56e-07     1s
   6   3.42014594e+07  3.42014593e+07  3.64e-12 9.09e-13  8.56e-10     1s

Barrier solved model in 6 iterations and 0.74 seconds (0.08 work units)
Optimal objective 3.42014594e+07

Extra simplex iterations after uncrush: 315

Root relaxation: objective 3.420146e+07, 339 iterations, 0.03 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 3.4201e+07    0  493          - 3.4201e+07      -     -    0s
     0     0 3.4201e+07    0  493          - 3.4201e+07      -     -    0s
     0     0 3.4201e+07    0  496          - 3.4201e+07      -     -    0s
     0     0 3.4201e+07    0  503          - 3.4201e+07      -     -    0s
     0     0 3.4201e+07    0  508          - 3.4201e+07      -     -    0s
     0     0 3.4201e+07    0  507          - 3.4201e+07      -     -    1s
     0     2 3.4201e+07    0  507          - 3.4201e+07      -     -   10s
  2465  3978 infeasible   44               - 3.4201e+07      -  18.8   16s
  NLP heuristic elapsed time = 5.01s
  8789  5954 3.4201e+07   91    0          - 3.4201e+07      -  15.2   25s
  8796  5958 3.4201e+07  100    0          - 3.4201e+07      -  15.1   42s
  8797  5962 3.4201e+07   16  509          - 3.4201e+07      -  15.2   48s
  8799  5965 3.4201e+07   17  485          - 3.4201e+07      -  15.2   55s
 17010 10364 3.7377e+07   95  263          - 3.4201e+07      -  13.2   62s
 21950  9704 infeasible  206               - 3.4201e+07      -  12.4   66s
 27126  8665 3.9831e+07  156  220          - 3.4201e+07      -  11.3   71s
 32811  9053 3.9831e+07  195  218          - 3.4201e+07      -  10.1   76s
 38295  9247 3.9831e+07  225  218          - 3.4201e+07      -   9.2   88s
 38396  9441 3.9831e+07  234  218          - 3.4201e+07      -   9.3   90s
 58328 10038 3.9831e+07  322  218          - 3.4201e+07      -   7.3   95s
 70716 10172 3.9831e+07  371  218          - 3.4201e+07      -   6.3  100s
 89466 10261 3.9831e+07  442  218          - 3.4201e+07      -   5.2  105s
 99689 10399 3.9831e+07  481  218          - 3.4201e+07      -   4.8  110s
 123095 10826 infeasible  582               - 3.4201e+07      -   4.2  115s
 140049 11099 infeasible  650               - 3.4201e+07      -   3.8  120s
 156061 11341 infeasible  715               - 3.4201e+07      -   3.6  126s
 176245 11751 3.9831e+07  798  217          - 3.4201e+07      -   3.3  131s
 190767 12011 3.9831e+07  858  217          - 3.4201e+07      -   3.2  135s
 209304 12315 3.9831e+07  935  217          - 3.4201e+07      -   3.0  141s
 222600 12531 3.9831e+07  992  217          - 3.4201e+07      -   2.9  145s
 245016 12881 infeasible 1085               - 3.4201e+07      -   2.8  151s
 257774 13093 3.9831e+07 1138  213          - 3.4201e+07      -   2.8  155s
 273850 13178 infeasible 1206               - 3.4201e+07      -   2.7  160s
 286080 13295 3.9831e+07 1254  213          - 3.4201e+07      -   2.6  165s
 303928 13345 3.9843e+07 1323  210          - 3.4201e+07      -   2.5  170s
 325113 13532 3.9843e+07 1405  209          - 3.4201e+07      -   2.4  175s
 341715 13610 3.9843e+07 1473  209          - 3.4201e+07      -   2.4  180s
 361359 13672 4.4607e+07 1547  210          - 3.4201e+07      -   2.3  185s
 381418 13742 4.4607e+07 1627  210          - 3.4201e+07      -   2.3  190s
 402371 13799 4.4607e+07 1708  210          - 3.4201e+07      -   2.2  195s
 421756 13855 4.4607e+07 1785  210          - 3.4201e+07      -   2.2  200s
 442350 13909 4.4607e+07 1865  210          - 3.4201e+07      -   2.1  205s
 458289 14035 4.4607e+07 1929  210          - 3.4201e+07      -   2.1  211s
 466119 14112 4.4607e+07 1961  210          - 3.4201e+07      -   2.1  215s
 477639 14309 4.4607e+07 2090  209          - 3.4201e+07      -   2.1  220s
 492516 14514 infeasible 2154               - 3.4201e+07      -   2.1  226s
 502692 14685 4.4607e+07 2201  209          - 3.4201e+07      -   2.1  230s
 513473 14859 4.4607e+07 2249  209          - 3.4201e+07      -   2.1  236s
 520672 15133 4.4607e+07 2281  209          - 3.4201e+07      -   2.2  240s
 533173 15861 4.4607e+07 2344  209          - 3.4201e+07      -   2.2  248s
 536266 16047 infeasible 2360               - 3.4201e+07      -   2.2  250s
 548627 16527 infeasible 2422               - 3.4201e+07      -   2.3  256s
 551666 16655 4.4607e+07 2435  209          - 3.4201e+07      -   2.3  260s
 557528 16907 4.4607e+07 2463  209          - 3.4201e+07      -   2.3  266s
 563776 17067 4.4607e+07 2491  209          - 3.4201e+07      -   2.3  272s
 570091 17296 4.4607e+07 2518  209          - 3.4201e+07      -   2.3  276s
 578914 17667 infeasible 2560               - 3.4201e+07      -   2.4  281s
 587548 17966 infeasible 2601               - 3.4201e+07      -   2.4  286s
 595625 18406 4.4607e+07 2641  207          - 3.4201e+07      -   2.4  291s
 603045 18764 4.4607e+07 2682  207          - 3.4201e+07      -   2.5  296s
 611089 19086 4.4607e+07 2727  207          - 3.4201e+07      -   2.5  301s
 622449 19418 4.4607e+07 2787  207          - 3.4201e+07      -   2.6  306s
 631412 19651 4.4607e+07 2832  207          - 3.4201e+07      -   2.6  311s
 640438 19916 4.4607e+07 2879  207          - 3.4201e+07      -   2.6  315s
 651874 20187 4.4607e+07 2939  207          - 3.4201e+07      -   2.7  323s
 655346 20260 infeasible 2958               - 3.4201e+07      -   2.7  325s
 663578 20488 infeasible 3003               - 3.4201e+07      -   2.7  330s
 672497 20670 4.4607e+07 3051  207          - 3.4201e+07      -   2.7  335s
 682005 20864 4.4607e+07 3104  207          - 3.4201e+07      -   2.8  341s
 684811 20902 4.4607e+07 3119  207          - 3.4201e+07      -   2.8  346s
 687573 20915 4.4607e+07 3134  207          - 3.4201e+07      -   2.8  362s
 690685 21000 4.4607e+07 3157  207          - 3.4201e+07      -   2.8  366s
 699644 21071 3.8622e+07 1525  177          - 3.4201e+07      -   2.8  370s
 705600 21144 4.4607e+07 3239  207          - 3.4201e+07      -   2.8  376s
 712547 21201 infeasible 3277               - 3.4201e+07      -   2.8  381s
 718259 21263 4.4607e+07 3308  207          - 3.4201e+07      -   2.8  387s
 723947 21315 4.4607e+07 3340  207          - 3.4201e+07      -   2.9  390s
 732352 21407 4.4607e+07 3388  207          - 3.4201e+07      -   2.9  395s
 740775 21576 4.4607e+07 3436  207          - 3.4201e+07      -   3.0  402s
 746894 21644 4.4607e+07 3472  207          - 3.4201e+07      -   3.0  408s
 749669 21743 4.4607e+07 3488  207          - 3.4201e+07      -   3.0  410s
 758834 21877 4.4607e+07 3543  207          - 3.4201e+07      -   3.0  416s
 766975 22054 4.4607e+07 3591  207          - 3.4201e+07      -   3.1  420s
 775143 22241 4.4607e+07 3639  207          - 3.4201e+07      -   3.1  426s
 780594 22365 4.4607e+07 3671  207          - 3.4201e+07      -   3.1  431s
 789008 22478 4.4607e+07 3719  207          - 3.4201e+07      -   3.2  436s
 794581 22534 4.4607e+07 3751  207          - 3.4201e+07      -   3.2  443s
 796941 22561 4.4607e+07 3767  207          - 3.4201e+07      -   3.2  446s
 799648 22588 4.4607e+07 3783  207          - 3.4201e+07      -   3.2  450s
 805059 22652 4.4607e+07 3815  207          - 3.4201e+07      -   3.2  458s
 807757 22686 infeasible 3832               - 3.4201e+07      -   3.2  461s
 810553 22708 4.4607e+07 3848  207          - 3.4201e+07      -   3.2  465s
 817388 22781 4.4607e+07 3891  207          - 3.4201e+07      -   3.2  472s
 820064 22810 infeasible 3908               - 3.4201e+07      -   3.2  475s
 825604 22879 infeasible 3941               - 3.4201e+07      -   3.2  483s
 829486 22915 4.4607e+07 3963  207          - 3.4201e+07      -   3.2  487s
 832072 22950 infeasible 3979               - 3.4201e+07      -   3.2  491s
 834865 22983 4.4607e+07 3994  207          - 3.4201e+07      -   3.2  496s
 837696 23031 infeasible 4010               - 3.4201e+07      -   3.2  500s
 844563 23109 4.4607e+07 4048  207          - 3.4201e+07      -   3.2  507s
 847418 23161 4.4607e+07 4064  207          - 3.4201e+07      -   3.2  511s
 852582 23247 4.4607e+07 4096  207          - 3.4201e+07      -   3.3  517s
 855292 23276 4.4607e+07 4112  207          - 3.4201e+07      -   3.3  521s
 860704 23349 4.4607e+07 4144  207          - 3.4201e+07      -   3.3  526s
 863398 23382 4.4607e+07 4160  207          - 3.4201e+07      -   3.3  530s
 868463 23458 4.4607e+07 4192  207          - 3.4201e+07      -   3.3  538s
 871231 23489 4.4607e+07 4208  207          - 3.4201e+07      -   3.3  541s
 873966 23519 4.4607e+07 4224  207          - 3.4201e+07      -   3.3  545s
 876698 23572 4.4607e+07 4240  207          - 3.4201e+07      -   3.3  550s
 882072 23654 4.4607e+07 4272  207          - 3.4201e+07      -   3.3  558s
 884773 23703 4.4607e+07 4288  207          - 3.4201e+07      -   3.3  562s
 887484 23749 4.4607e+07 4304  207          - 3.4201e+07      -   3.3  566s
 892805 23836 4.4607e+07 4336  207          - 3.4201e+07      -   3.3  573s
 895521 23895 4.4607e+07 4352  207          - 3.4201e+07      -   3.4  577s
 898126 23973 4.4607e+07 4368  207          - 3.4201e+07      -   3.4  581s
 900786 24034 4.4607e+07 4384  207          - 3.4201e+07      -   3.4  585s
 905791 24165 4.4607e+07 4416  207          - 3.4201e+07      -   3.4  593s
 908210 24225 4.4607e+07 4432  207          - 3.4201e+07      -   3.4  596s
 913124 24321 4.4607e+07 4464  207          - 3.4201e+07      -   3.4  600s

Explored 914512 nodes (3119241 simplex iterations) in 600.12 seconds (88.94 work units)
Thread count was 32 (of 64 available processors)

Solution count 0

Time limit reached
Best objective -, best bound 3.420145935000e+07, gap -
Gurobi 12.0.3: time limit, without a feasible solution
3.11924e+06 simplex iterations
12 barrier iterations
914512 branching nodes
eps [*,*] (tr)
:        1            2            3            4            5         :=
2    0.00378256    .            .            .            .
3     .           0.00283396    .            .            .
4     .            .           0.00485734    .            .
5     .            .            .           0.00453201    .
6     .            .            .            .           0.00444594
15   0.00323455    .            .            .            .

:        6            7            8            9           10           11  :=
7    0.00288958    .            .            .            .           .
8     .           0.00418954    .            .            .           .
9     .            .           0.00363297    .            .          0.00385492
10    .            .            .           0.00418954    .           .
16    .            .            .           0.0024262     .           .
17    .            .            .            .           0.0024262    .
20    .            .            .            .            .          0.00336572

:        12           13           14          15           18           20  :=
11   0.00335316    .            .            .           .            .
12    .           0.00368094    .            .           .            .
13    .            .           0.00254861    .           .            .
14    .            .            .           0.0027383    .            .
16    .            .            .            .           .           0.00198177
18   0.00221692    .            .            .           .            .
19    .            .            .            .          0.00255434    .
;

*******************************************************************************

Constraints violation:


Sum of constraints violation: 113402.72924490001
*******************************************************************************

*******************************************************************************

Absolute and relative violations between original and approximation constraint 2:

+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| Constraint ID   |   flow value |   Original Con Violation |   Approx Con Violation |   Absolute Violation |   Relative Violation |
+=================+==============+==========================+========================+======================+======================+
| 1,2             |            0 |                   182.88 |                 182.88 |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 1,15            |            0 |                   182.88 |                 182.88 |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,3             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 3,4             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 4,5             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 5,6             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 6,7             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 7,8             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 8,9             |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 9,10            |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 9,16            |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 10,17           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 11,9            |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 11,20           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 12,11           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 12,18           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 13,12           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 14,13           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 15,14           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 18,19           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 20,16           |            0 |                     0    |                   0    |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+

Sum of violation of original headloss constraint: 365.76
Sum of violation of approx headloss constraint: 365.76

Con2 sum of absolute violation between original function and approximate function: 0.0
Con2 sum of relative violation between original function and approximate function: 0.0
*******************************************************************************

Total cost using gurobi: 0.0
gurobi solve time: 600.43 seconds
*******************************************************************************

