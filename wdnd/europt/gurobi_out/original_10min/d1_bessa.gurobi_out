Water Network: 1
Results smooth approximation 1 of Hazen--Williams headloss constraint

*******************************************************************************
wdnmodel.mod

-------------------------------- Solving with gurobi --------------------------
Gurobi 12.0.3: Set parameter LogToConsole to value 1
  tech:outlev = 1
  tech:outlev_mp = 1
Set parameter Presolve to value 1
  pre:solve = 1
Set parameter Aggregate to value 1
  pre:aggregate = 1
Set parameter TimeLimit to value 600
  lim:time = 600
Set parameter NumericFocus to value 1
  alg:numericfocus = 1
Set parameter OBBT to value 0
  mip:obbt = 0
Set parameter ScaleFlag to value 1
  pre:scale = 1
Set parameter Method to value 2
  alg:method = 2
Set parameter NodeMethod to value 1
  mip:nodemethod = 1
Set parameter NonConvex to value 2
  qp:nonconvex = 2
Set parameter MIPFocus to value 1
  mip:focus = 1
Set parameter NLPHeur to value 1
  alg:nlpheur = 1
Set parameter VarBranch to value 0
  mip:varbranch = 0
Set parameter MIPGapAbs to value 1e-05
  mip:gapabs = 1.0000000000000001e-05
Set parameter MIPGap to value 1e-06
  mip:gap = 9.9999999999999995e-07
Set parameter FeasibilityTol to value 1e-05
  alg:feastol = 1.0000000000000001e-05
  cvt:pre:feastol = 1.0000000000000001e-05
  cvt:pre:feastolrel = 9.9999999999999995e-07
  sol:chk:feastol = 1.0000000000000001e-05
  sol:chk:feastolrel = 9.9999999999999995e-07

AMPL MP initial flat model has 83 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  13 linear; 14 quadratic;
Algebraic expressions:  7 abs; 7 powconstexp;

AMPL MP final model has 111 variables (0 integer, 0 binary);
Objectives: 1 linear; 
Constraints:  20 linear; 14 quadratic;
Algebraic expressions:  7 abs; 7 powconstexp;


Set parameter InfUnbdInfo to value 1
Gurobi Optimizer version 12.0.3 build v12.0.3rc0 (linux64 - "Debian GNU/Linux 12 (bookworm)")

CPU model: INTEL(R) XEON(R) GOLD 6530, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 32 physical cores, 64 logical processors, using up to 32 threads

Non-default parameters:
TimeLimit  600
FeasibilityTol  1e-05
MIPGap  1e-06
MIPGapAbs  1e-05
Method  2
ScaleFlag  1
MIPFocus  1
NodeMethod  1
OBBT  0
VarBranch  0
InfUnbdInfo  1
NonConvex  2
NumericFocus  1
Presolve  1

Optimize a model with 20 rows, 111 columns and 103 nonzeros
Model fingerprint: 0x1ae680f9
Model has 7 simple general constraints
  7 ABS
Model has 7 general nonlinear constraints (210 nonlinear terms)
Variable types: 111 continuous, 0 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [2e+00, 2e+01]
  Bounds range     [2e-01, 5e+04]
  RHS range        [4e-02, 3e+03]
Presolve model has 7 nlconstr
Added 147 variables to disaggregate expressions.
Presolve added 18 rows and 0 columns
Presolve removed 0 rows and 3 columns
Presolve time: 0.00s
Presolved: 458 rows, 263 columns, 1062 nonzeros
Presolved model has 77 bilinear constraint(s)
Presolved model has 7 nonlinear constraint(s)

Solving non-convex MINLP

Variable types: 259 continuous, 4 integer (4 binary)
Root barrier log...

Ordering time: 0.00s

Barrier statistics:
 AA' NZ     : 2.935e+03
 Factor NZ  : 4.472e+03
 Factor Ops : 8.615e+04 (less than 1 second per iteration)
 Threads    : 1

                  Objective                Residual
Iter       Primal          Dual         Primal    Dual     Compl     Time
   0   1.12472217e+06 -7.22632925e+05  1.47e+04 1.78e-15  1.88e+04     0s
   1   1.71937225e+05 -2.31206030e+05  2.08e+03 1.07e-14  2.73e+03     0s
   2   8.48134572e+04 -3.70381609e+04  4.49e+02 8.53e-14  6.08e+02     0s
   3   6.66065492e+04  4.43001757e+03  1.66e+02 7.46e-14  2.47e+02     1s
   4   5.74901156e+04  3.60937790e+04  5.38e+01 6.75e-14  8.18e+01     1s
   5   5.54137908e+04  5.00283022e+04  1.66e+01 4.49e-14  2.41e+01     1s
   6   5.54025404e+04  5.17839994e+04  5.08e+00 7.17e-14  1.05e+01     1s
   7   5.45893654e+04  5.32717528e+04  8.25e-01 4.62e-14  2.80e+00     1s
   8   5.45160865e+04  5.42297851e+04  3.46e-01 5.33e-14  7.04e-01     1s
   9   5.44673609e+04  5.44249068e+04  3.95e-02 1.06e-13  9.35e-02     1s
  10   5.44622574e+04  5.44491217e+04  1.24e-02 6.37e-14  2.84e-02     1s
  11   5.44598899e+04  5.44594385e+04  1.41e-03 6.27e-14  1.54e-03     1s
  12   5.44595643e+04  5.44595599e+04  1.25e-05 3.91e-14  1.42e-05     1s
  13   5.44595613e+04  5.44595612e+04  2.80e-07 5.74e-14  2.97e-07     1s
  14   5.44595613e+04  5.44595613e+04  6.19e-08 6.43e-14  7.54e-10     1s

Barrier solved model in 14 iterations and 0.59 seconds (0.01 work units)
Optimal objective 5.44595613e+04

Extra simplex iterations after uncrush: 2

Root relaxation: objective 5.445956e+04, 38 iterations, 0.12 seconds (0.00 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 54459.5613    0   16          - 54459.5613      -     -    0s
     0     0 54459.5613    0   13          - 54459.5613      -     -    0s
     0     0 55037.7466    0   16          - 55037.7466      -     -    0s
     0     0 60970.1235    0   24          - 60970.1235      -     -    0s
     0     0 61235.9043    0   23          - 61235.9043      -     -    0s
     0     0 66409.3442    0   28          - 66409.3442      -     -    0s
     0     0 67763.8730    0   29          - 67763.8730      -     -    0s
     0     0 69421.7062    0   29          - 69421.7062      -     -    0s
H    0     0                    153623.19200 69421.7062  54.8%     -    0s
     0     0 71363.2386    0   29 153623.192 71363.2386  53.5%     -    0s
     0     0 72028.1430    0   38 153623.192 72028.1430  53.1%     -    1s
H    0     0                    139501.56858 72036.1037  48.4%     -    1s
H    0     0                    136496.25098 72036.1037  47.2%     -    1s
     0     2 72036.1037    0   38 136496.251 72036.1037  47.2%     -    1s
H   43    46                    123884.39361 98886.7471  20.2%  26.2    2s
   729   108 123832.610   38    5 123884.394 123824.062  0.05%  14.2    5s
 35029  2560 123854.872   54    3 123884.394 123854.697  0.02%   1.1   10s
 54357  2685 123854.953   24   20 123884.394 123854.953  0.02%   0.8   15s
 86155  5028 123867.870   64    1 123884.394 123867.325  0.01%   0.6   20s
 118175  4924          -   66      123884.394 123867.325  0.01%   0.4   25s
 150180  4711 123867.404   66    1 123884.394 123867.325  0.01%   0.3   30s
 186911  4714 123867.434   70    1 123884.394 123867.325  0.01%   0.3   35s
 219579  4961 123867.469   74    1 123884.394 123867.325  0.01%   0.2   40s
 253106  5075 123867.498   72    1 123884.394 123867.325  0.01%   0.2   45s
 278831  5315 123868.013   66    1 123884.394 123867.325  0.01%   0.2   50s
 316408  4969          -   69      123884.394 123867.325  0.01%   0.2   55s
 348365  5549          -   72      123884.394 123867.325  0.01%   0.2   60s
 378160  5454 123867.607   64    1 123884.394 123867.325  0.01%   0.1   65s
 407149  5920          -   69      123884.394 123867.325  0.01%   0.1   70s
 436487  5427 123867.671   68    1 123884.394 123867.325  0.01%   0.1   75s
 465502  5547          -   73      123884.394 123867.325  0.01%   0.1   80s
 491494  5478          -   71      123884.394 123867.325  0.01%   0.1   85s
 528285  5562 123867.960   65    1 123884.394 123867.325  0.01%   0.1   90s
 566270  5323 123867.874   67    1 123884.394 123867.325  0.01%   0.1   95s
 602408  5419          -   75      123884.394 123867.325  0.01%   0.1  100s
 633629  5301          -   71      123884.394 123867.325  0.01%   0.1  105s
 666060  5249          -   72      123884.394 123867.325  0.01%   0.1  110s
 703085  4675          -   73      123884.394 123867.325  0.01%   0.1  115s
 733198  4472          -   67      123884.394 123867.325  0.01%   0.1  120s
 764106  4247          -   71      123884.394 123867.325  0.01%   0.1  125s
 790165  4309          -   68      123884.394 123867.325  0.01%   0.1  130s
 814903  3973 123868.020   68    1 123884.394 123867.325  0.01%   0.1  135s
 841017  4235 123868.064   70    1 123884.394 123867.325  0.01%   0.1  140s
 866970  4191          -   66      123884.394 123867.325  0.01%   0.1  145s
 892513  4389 123868.846   72    1 123884.394 123867.325  0.01%   0.1  150s
 922714  4327          -   71      123884.394 123867.325  0.01%   0.1  155s
 951198  4741          -   72      123884.394 123867.325  0.01%   0.1  160s
 978060  4665 123868.160   66    1 123884.394 123867.325  0.01%   0.1  165s
 1011176  4346          -   71      123884.394 123867.325  0.01%   0.1  170s
 1040401  4616          -   69      123884.394 123867.325  0.01%   0.1  175s
 1069696  4900          -   78      123884.394 123867.325  0.01%   0.0  180s
 1099212  4851 123868.278   63    1 123884.394 123867.325  0.01%   0.0  185s
 1123954  5456 123868.828   63    1 123884.394 123867.325  0.01%   0.0  190s
 1146779  5098 123868.324   71    1 123884.394 123867.325  0.01%   0.0  195s
 1169779  4854 123868.344   70    1 123884.394 123867.325  0.01%   0.0  200s
 1195047  4705          -   74      123884.394 123867.325  0.01%   0.0  205s
 1213492  4901          -   71      123884.394 123867.325  0.01%   0.0  210s
 1228704  4692          -   75      123884.394 123867.325  0.01%   0.0  215s
 1253858  4662 123868.417   61    1 123884.394 123867.325  0.01%   0.0  220s
 1284163  4871          -   70      123884.394 123867.325  0.01%   0.0  225s
 1316728  5034 123868.472   69    1 123884.394 123867.325  0.01%   0.0  230s
 1343079  4780          -   68      123884.394 123867.325  0.01%   0.0  235s
 1367648  5427          -   69      123884.394 123867.325  0.01%   0.0  240s
 1390525  5333 123868.556   75    1 123884.394 123867.325  0.01%   0.0  245s
 1416954  5367          -   75      123884.394 123867.325  0.01%   0.0  250s
 1438375  5250          -   75      123884.394 123867.325  0.01%   0.0  255s
 1464628  5194 123868.617   56    1 123884.394 123867.325  0.01%   0.0  260s
 1486546  5080          -   70      123884.394 123867.325  0.01%   0.0  265s
 1512435  4914          -   65      123884.394 123867.325  0.01%   0.0  270s
 1541669  5297          -   68      123884.394 123867.325  0.01%   0.0  275s
 1567746  5530 123868.820   64    1 123884.394 123867.325  0.01%   0.0  280s
 1589342  5272 123868.662   64    1 123884.394 123867.325  0.01%   0.0  285s
 1611548  5273          -   69      123884.394 123867.325  0.01%   0.0  290s
 1637487  5148 123868.685   71    1 123884.394 123867.325  0.01%   0.0  295s
 1660019  5210          -   68      123884.394 123867.325  0.01%   0.0  300s
 1684865  5311 123868.708   71    1 123884.394 123867.325  0.01%   0.0  305s
 1707308  5153 123868.718   71    1 123884.394 123867.325  0.01%   0.0  310s
 1733905  5384          -   71      123884.394 123867.325  0.01%   0.0  315s
 1756189  5074          -   65      123884.394 123867.325  0.01%   0.0  320s
 1782121  5002          -   61      123884.394 123867.325  0.01%   0.0  325s
 1807605  5248 123868.827   64    1 123884.394 123867.325  0.01%   0.0  330s
 1832928  4995 123868.775   72    1 123884.394 123867.325  0.01%   0.0  335s
 1859237  4902          -   75      123884.394 123867.325  0.01%   0.0  340s
 1884886  4644          -   67      123884.394 123867.325  0.01%   0.0  345s
 1911762  4495          -   71      123884.394 123867.325  0.01%   0.0  350s
 1937746  4023          -   69      123884.394 123867.325  0.01%   0.0  355s
 1963742  3534          -   71      123884.394 123867.325  0.01%   0.0  360s
 1990557  3209          -   75      123884.394 123867.325  0.01%   0.0  365s
 2012793  3193          -   79      123884.394 123867.325  0.01%   0.0  370s
 2041329  3370 123869.180   69    1 123884.394 123867.325  0.01%   0.0  375s
H2055445  3468                    123884.39358 123867.325  0.01%   0.0  381s
H2056461  3405                    123884.39355 123867.325  0.01%   0.0  383s
H2060182  3348                    123884.39354 123867.325  0.01%   0.0  384s
 2061633  3197 123868.882   63    1 123884.394 123867.325  0.01%   0.0  385s
 2084377  3899 123869.238   65    1 123884.394 123867.325  0.01%   0.0  390s
 2111079  3744          -   68      123884.394 123867.325  0.01%   0.0  395s
 2132731  3641          -   68      123884.394 123867.325  0.01%   0.0  400s
 2158941  3895 123868.933   70    1 123884.394 123867.325  0.01%   0.0  405s
 2180684  3973 123868.933   70    1 123884.394 123867.325  0.01%   0.0  410s
H2197099  3884                    123884.39336 123867.325  0.01%   0.0  414s
 2200552  3938          -   69      123884.393 123867.325  0.01%   0.0  415s
H2202408  3912                    123884.39317 123867.325  0.01%   0.0  416s
 2222267  3897 123869.176   68    1 123884.393 123867.325  0.01%   0.0  420s
 2248875  3570          -   71      123884.393 123867.325  0.01%   0.0  425s
 2271375  3512 123869.183   82    1 123884.393 123867.325  0.01%   0.0  430s
 2296398  3646          -   71      123884.393 123867.325  0.01%   0.0  435s
H2309925  3402                    123884.39107 123867.325  0.01%   0.0  439s
 2314179  3441 123869.000   65    1 123884.391 123867.325  0.01%   0.0  440s
 2340186  3477 123869.018   76    1 123884.391 123867.325  0.01%   0.0  445s
 2370238  3549 123869.022   68    1 123884.391 123867.325  0.01%   0.0  450s
 2396101  3437          -   75      123884.391 123867.325  0.01%   0.0  455s
 2421647  3632 123869.044   77    1 123884.391 123867.325  0.01%   0.0  461s
 2435909  3719          -   75      123884.391 123867.325  0.01%   0.0  465s
 2454463  3559 123869.056   66    1 123884.391 123867.325  0.01%   0.0  470s
 2479501  3568 123869.069   69    1 123884.391 123867.325  0.01%   0.0  475s
 2502304  3409          -   71      123884.391 123867.325  0.01%   0.0  480s
 2527245  3625          -   76      123884.391 123867.325  0.01%   0.0  485s
 2546249  3571          -   70      123884.391 123867.325  0.01%   0.0  490s
 2572525  3562          -   69      123884.391 123867.325  0.01%   0.0  495s
 2593602  3434 123869.188   68    1 123884.391 123867.325  0.01%   0.0  500s
 2619789  3719 123869.145   76    1 123884.391 123867.325  0.01%   0.0  505s
 2645465  3538          -   72      123884.391 123867.325  0.01%   0.0  510s
 2667235  3551 123869.148   81    1 123884.391 123867.325  0.01%   0.0  515s
 2693258  3612          -   66      123884.391 123867.325  0.01%   0.0  520s
 2718874  3631          -   66      123884.391 123867.325  0.01%   0.0  525s
 2747332  3415          -   72      123884.391 123867.325  0.01%   0.0  530s
H2750097  3399                    123884.38990 123867.325  0.01%   0.0  534s
 2751173  3324 123869.172   78    1 123884.390 123867.325  0.01%   0.0  535s
 2773721  3212 123869.184   76    1 123884.390 123867.325  0.01%   0.0  540s
 2795931  2656          -   78      123884.390 123867.325  0.01%   0.0  545s
 2822020  3227          -   69      123884.390 123867.325  0.01%   0.0  550s
 2843271  3552          -   65      123884.390 123867.325  0.01%   0.0  555s
 2866927  3622 123869.207   72    1 123884.390 123867.325  0.01%   0.0  560s
 2889323  3542 123869.215   67    1 123884.390 123867.325  0.01%   0.0  565s
 2910964  3277 123870.054   86    1 123884.390 123867.325  0.01%   0.0  570s
H2933208  3576                    123884.38968 123867.325  0.01%   0.0  580s
H2946681  3471                    123884.38904 123867.325  0.01%   0.0  586s
H2947042  3470                    123884.38893 123867.325  0.01%   0.0  586s
H2947404  3434                    123884.38398 123867.325  0.01%   0.0  587s
 2957353  3285          -   71      123884.384 123867.325  0.01%   0.0  590s
 2985451  3498          -   67      123884.384 123867.325  0.01%   0.0  595s

Cutting planes:
  Implied bound: 17
  RLT: 11
  Relax-and-lift: 14

Explored 3011311 nodes (52773 simplex iterations) in 600.21 seconds (21.42 work units)
Thread count was 32 (of 64 available processors)

Solution count 10: 123884 123884 123884 ... 123884

Time limit reached
Best objective 1.238843839812e+05, best bound 1.238673248482e+05, gap 0.0138%
Gurobi 12.0.3: time limit, feasible solution; objective 123884.384
52773 simplex iterations
33 barrier iterations
3.01131e+06 branching nodes
absmipgap=17.0591, relmipgap=0.000137702
eps :=
1 2   1.56742e-06
2 3   4.57086e-06
2 6   2.56538e-06
3 4   2.41583e-06
4 5   2.13754e-06
6 7   2.15386e-06
7 5   1.94078e-06
;

*******************************************************************************

Constraints violation:


Sum of constraints violation: 2.68316695647558e-05
*******************************************************************************

*******************************************************************************

Absolute and relative violations between original and approximation constraint 2:

+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| Constraint ID   |   flow value |   Original Con Violation |   Approx Con Violation |   Absolute Violation |   Relative Violation |
+=================+==============+==========================+========================+======================+======================+
| 1,2             |    0.42043   |                -0        |              -0        |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,3             |    0.29233   |                -1.9e-07  |              -1.9e-07  |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 2,6             |    0.1281    |                -0        |              -0        |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 3,4             |    0.24889   |                -1.05e-06 |              -1.05e-06 |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 4,5             |    0.2086    |                 1.77e-06 |               1.77e-06 |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 6,7             |    0.0803201 |                -9.87e-06 |              -9.87e-06 |                   -0 |                   -0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+
| 7,5             |    0         |                 0        |               0        |                    0 |                    0 |
+-----------------+--------------+--------------------------+------------------------+----------------------+----------------------+

Sum of violation of original headloss constraint: 1.2882083538334754e-05
Sum of violation of approx headloss constraint: 1.2885762544767587e-05

Con2 sum of absolute violation between original function and approximate function: 4.46869297121566e-09
Con2 sum of relative violation between original function and approximate function: 6.721210781575168e-10
*******************************************************************************

Total cost using gurobi: 123884.38398120583
gurobi solve time: 602.24 seconds
*******************************************************************************

