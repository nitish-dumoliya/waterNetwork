Water Network: ../data/d17_foss_poly_1.dat 

Results of smooth approximation of head loss constraint

*******************************************************************************
min_demand: 0.00026000000000000003
max_demand: 0.00202
max_flow: 0.03390999999999999
eps: 1e-10
Ipopt solver outputs: 

Ipopt 3.14.13: outlev = 0
expect_infeasible_problem = yes
tol = 1e-9
bound_relax_factor=0
bound_push = 0.01
bound_frac = 0.01
nlp_scaling_method = none


******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Eclipse Public License (EPL).
         For more information visit https://github.com/coin-or/Ipopt
******************************************************************************

 
Ipopt 3.14.13: Optimal Solution Found

suffix ipopt_zU_out OUT;
suffix ipopt_zL_out OUT;
total_cost: 21298.668450125868 

*******************************************************************************

Violations between approximation constraint and original constraint:

+-----------------+----------------------+----------------------+
| Constraint ID   |   Absolute Violation |   Relative Violation |
+=================+======================+======================+
| con2_1,17       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_1,31       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_2,3        |                    0 |           8.418e-05  |
+-----------------+----------------------+----------------------+
| con2_2,18       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_3,4        |                    0 |           0.00099119 |
+-----------------+----------------------+----------------------+
| con2_3,11       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_4,5        |                    0 |           0.00037037 |
+-----------------+----------------------+----------------------+
| con2_5,6        |                   -0 |           4.036e-05  |
+-----------------+----------------------+----------------------+
| con2_5,13       |                   -0 |           2e-08      |
+-----------------+----------------------+----------------------+
| con2_6,7        |                   -0 |           1.72e-05   |
+-----------------+----------------------+----------------------+
| con2_7,24       |                   -0 |           1.2e-07    |
+-----------------+----------------------+----------------------+
| con2_8,28       |                    0 |           1.019e-05  |
+-----------------+----------------------+----------------------+
| con2_9,36       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_10,11      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_10,32      |                    0 |           0.532667   |
+-----------------+----------------------+----------------------+
| con2_11,19      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_11,26      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_12,4       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_12,13      |                    0 |           0.00046772 |
+-----------------+----------------------+----------------------+
| con2_13,14      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_14,20      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_14,21      |                   -0 |           1.49e-06   |
+-----------------+----------------------+----------------------+
| con2_15,16      |                   -0 |           3.72e-06   |
+-----------------+----------------------+----------------------+
| con2_15,22      |                   -0 |           4.06e-06   |
+-----------------+----------------------+----------------------+
| con2_16,25      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_16,29      |                    0 |           2.58e-06   |
+-----------------+----------------------+----------------------+
| con2_17,2       |                    0 |           3.006e-05  |
+-----------------+----------------------+----------------------+
| con2_17,18      |                    0 |           0.104849   |
+-----------------+----------------------+----------------------+
| con2_18,10      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_19,12      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_19,20      |                    0 |           8.814e-05  |
+-----------------+----------------------+----------------------+
| con2_20,15      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_21,6       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_21,22      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_22,7       |                    0 |           0.00060048 |
+-----------------+----------------------+----------------------+
| con2_22,23      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_23,25      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_24,8       |                   -0 |           0.211052   |
+-----------------+----------------------+----------------------+
| con2_24,23      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_25,8       |                    0 |           1e-08      |
+-----------------+----------------------+----------------------+
| con2_26,15      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_26,27      |                   -0 |           5.69e-06   |
+-----------------+----------------------+----------------------+
| con2_27,16      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_28,9       |                   -0 |           3.8e-06    |
+-----------------+----------------------+----------------------+
| con2_28,29      |                   -0 |           8.163e-05  |
+-----------------+----------------------+----------------------+
| con2_29,30      |                    0 |           0.00395717 |
+-----------------+----------------------+----------------------+
| con2_29,33      |                   -0 |           1e-08      |
+-----------------+----------------------+----------------------+
| con2_30,9       |                   -0 |           0.00018552 |
+-----------------+----------------------+----------------------+
| con2_30,35      |                   -0 |           3e-08      |
+-----------------+----------------------+----------------------+
| con2_31,10      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_31,34      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_32,27      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_32,33      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_33,34      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_34,35      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_35,36      |                    0 |           0.00016729 |
+-----------------+----------------------+----------------------+
| con2_36,1       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_37,1       |                    0 |           0          |
+-----------------+----------------------+----------------------+

Total absolute constraint violation using ipopt: 1.4264554256228162e-10
Total relative constraint violation using ipopt: 0.8556809435266122
*******************************************************************************

total_cost using ipopt: 21298.668450125868
solve_time using ipopt: 6.279901
*******************************************************************************

gurobi solver outputs:

eps: 1e-10 

Gurobi 12.0.1: Set parameter LogToConsole to value 1
  tech:outlev = 1
Set parameter Presolve to value 1
  pre:solve = 1
Set parameter TimeLimit to value 3600
  lim:time = 3600
  alg:iisfind = 1
Set parameter IISMethod to value 0
  alg:iismethod = 0
  alg:iisforce = 1
Set parameter NumericFocus to value 1
  alg:numericfocus = 1
  cvt:socp = 2
Set parameter Method to value 3
  alg:method = 3
Set parameter NodeMethod to value 1
  mip:nodemethod = 1
Set parameter ConcurrentMethod to value 3
  alg:concurrentmethod = 3
Set parameter NonConvex to value 2
  qp:nonconvex = 2
Set parameter VarBranch to value 0
  mip:varbranch = 0
Set parameter OBBT to value 1
  mip:obbt = 1
  alg:start = 1
Set parameter FeasibilityTol to value 1e-06
  alg:feastol = 1e-06
Set parameter InfUnbdInfo to value 1
Gurobi Optimizer version 12.0.1 build v12.0.1rc0 (linux64 - "Debian GNU/Linux 12 (bookworm)")

CPU model: INTEL(R) XEON(R) GOLD 6530, instruction set [SSE2|AVX|AVX2|AVX512]
Thread count: 32 physical cores, 64 logical processors, using up to 32 threads

Non-default parameters:
TimeLimit  3600
Method  3
ConcurrentMethod  3
NodeMethod  1
OBBT  1
VarBranch  0
IISMethod  0
InfUnbdInfo  1
NonConvex  2
NumericFocus  1
Presolve  1

Optimize a model with 152 rows, 1835 columns and 1564 nonzeros
Model fingerprint: 0xa58805b8
Model has 58 general nonlinear constraints (10208 nonlinear terms)
Variable types: 1835 continuous, 0 integer (0 binary)
Coefficient statistics:
  Matrix range     [1e+00, 1e+00]
  Objective range  [4e-01, 2e+02]
  Bounds range     [5e-11, 2e+13]
  RHS range        [3e-01, 4e+02]
Warning: Model contains large bounds

User MIP start produced solution with objective 21298.7 (0.00s)
Loaded user MIP start with objective 21298.7

Presolve model has 58 nlconstr
Added 2900 variables to disaggregate expressions.
Presolve removed 0 rows and 407 columns
Presolve time: 0.22s
Presolved: 13434 rows, 5663 columns, 29752 nonzeros
Presolved model has 2668 bilinear constraint(s)
Presolved model has 174 nonlinear constraint(s)

Solving non-convex MINLP

Found heuristic solution: objective 21298.668446
Variable types: 5663 continuous, 0 integer (0 binary)
  NLP heuristic elapsed time = 5.00s

Concurrent LP optimizer: primal and dual simplex (primal and dual model)
Showing primal log only...

Root relaxation presolved: 530 rows, 1515 columns, 2365 nonzeros


Root simplex log...

Iteration    Objective       Primal Inf.    Dual Inf.      Time
       0    0.0000000e+00   8.472526e+10   1.835391e+07      8s
      12    3.1942268e+03   0.000000e+00   0.000000e+00      8s
    1486    3.1942268e+03   0.000000e+00   0.000000e+00      9s
Extra simplex iterations after uncrush: 1474

Solved with dual simplex

Root relaxation: objective 3.194227e+03, 1422 iterations, 0.30 seconds (0.03 work units)

    Nodes    |    Current Node    |     Objective Bounds      |     Work
 Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time

     0     0 3194.22680    0 1541 21298.6684 3194.22680  85.0%     -    8s
     0     0 3194.22680    0 1558 21298.6684 3194.22680  85.0%     -    8s
     0     0 3194.22680    0 1559 21298.6684 3194.22680  85.0%     -    9s
     0     0 3194.22680    0 1554 21298.6684 3194.22680  85.0%     -    9s
     0     0 3194.22680    0 1554 21298.6684 3194.22680  85.0%     -    9s
     0     0 3194.22680    0 1480 21298.6684 3194.22680  85.0%     -    9s
     0     0 3194.22680    0 1490 21298.6684 3194.22680  85.0%     -    9s
     0     0 3194.22680    0 1479 21298.6684 3194.22680  85.0%     -    9s
     0     0 3194.22680    0  709 21298.6684 3194.22680  85.0%     -   10s
  NLP heuristic elapsed time = 5.06s
     0     0 3194.22685    0  861 21298.6684 3194.22685  85.0%     -   20s
     0     0 3423.10168    0  292 21298.6684 3423.10168  83.9%     -   21s
     0     0 3423.10168    0  289 21298.6684 3423.10168  83.9%     -   21s
     0     0 3423.10168    0  290 21298.6684 3423.10168  83.9%     -   21s
     0     0 3423.10168    0  293 21298.6684 3423.10168  83.9%     -   21s
     0     0 3423.10168    0  293 21298.6684 3423.10168  83.9%     -   22s
     0     0 3423.10168    0  291 21298.6684 3423.10168  83.9%     -   22s
     0     0 3423.10168    0  289 21298.6684 3423.10168  83.9%     -   22s
     0     0 3423.10168    0  287 21298.6684 3423.10168  83.9%     -   22s
     0     0 3423.10168    0  280 21298.6684 3423.10168  83.9%     -   23s
     0     2 3423.10168    0  280 21298.6684 3423.10168  83.9%     -   67s
     1     3 3423.10168    1  281 21298.6684 3423.10168  83.9%   128   72s
     3     4 3423.10168    2  281 21298.6684 3423.10168  83.9%  72.7   75s
    13     8 3423.10168    5  278 21298.6684 3423.10168  83.9%  98.5 3600s

Cutting planes:
  RLT: 68

Explored 21 nodes (14896 simplex iterations) in 3600.22 seconds (1308.18 work units)
Thread count was 32 (of 64 available processors)

Solution count 2: 21298.7 21298.7 

Time limit reached
Best objective 2.129866844630e+04, best bound 3.423101676130e+03, gap 83.9281%
Gurobi 12.0.1: time limit, feasible solution; objective 21298.66845
14896 simplex iterations
21 branching nodes
absmipgap=17875.6, relmipgap=0.839281
*******************************************************************************

q [*,*]
:       1           2           3           4           5           6        :=
2      .         .          0.0613481    .           .            .
3      .         .           .          0.0326096    .            .
4      .         .           .           .          0.0420659     .
5      .         .           .           .           .          -0.0738666
12     .         .           .          0.819456     .            .
17     .        0.0795591    .           .           .            .
21     .         .           .           .           .           0.772311
36   -1.14239    .           .           .           .            .
37   33.91       .           .           .           .            .

:        7             8            9           10         11         12     :=
3      .            .             .            .        -0.991261    .
6    -0.0915552     .             .            .          .          .
10     .            .             .            .        11.7287      .
18     .            .             .          -3.03383     .          .
19     .            .             .            .          .         1.76907
22    0.037143      .             .            .          .          .
24     .          -0.00572244     .            .          .          .
25     .           0.690164       .            .          .          .
28     .            .           -0.133731      .          .          .
30     .            .           -0.0501969     .          .          .
31     .            .             .          15.8752      .          .

:        13          14         15         16         17          18         :=
1      .            .          .          .         1.35752     .
2      .            .          .          .          .        -1.02179
5    -0.514067      .          .          .          .          .
12    0.0396163     .          .          .          .          .
13     .          -1.63445     .          .          .          .
15     .            .          .        -0.134483    .          .
17     .            .          .          .          .         0.00795966
20     .            .        -2.87463     .          .          .
26     .            .         3.70858     .          .          .
27     .            .          .         7.83099     .          .

:      19          20          21          22          23         24        :=
7     .          .            .           .           .        -0.314412
11   3.70971     .            .           .           .          .
14    .        -2.00526     -0.169186     .           .          .
15    .          .            .         -0.131564     .          .
19    .         0.0606382     .           .           .          .
21    .          .            .         -1.9015       .          .
22    .          .            .           .         -3.0402      .
24    .          .            .           .         -0.97869     .

:       25        26         27          28          29          30        :=
8      .         .          .         0.104442     .           .
11     .        5.27769     .          .           .           .
16    6.33906    .          .          .          0.147445     .
23   -4.87889    .          .          .           .           .
26     .         .        -0.120895    .           .           .
28     .         .          .          .         -0.0618275    .
29     .         .          .          .           .          0.0225585
32     .         .         9.37188     .           .           .

:      31          32           33          34         35           36       :=
1    30.9201    .              .            .         .           .
9      .        .              .            .         .         -0.723927
10     .       0.00275114      .            .         .           .
29     .        .            -0.556941      .         .           .
30     .        .              .            .       -0.467245     .
31     .        .              .          14.1449     .           .
32     .        .           -10.3991        .         .           .
33     .        .              .         -11.7261     .           .
34     .        .              .            .        1.67878      .
35     .        .              .            .         .          0.0515361
;

Violations between approximation constraint and original constraint:

+-----------------+----------------------+----------------------+
| Constraint ID   |   Absolute Violation |   Relative Violation |
+=================+======================+======================+
| con2_1,17       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_1,31       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_2,3        |                    0 |           8.418e-05  |
+-----------------+----------------------+----------------------+
| con2_2,18       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_3,4        |                    0 |           0.00099119 |
+-----------------+----------------------+----------------------+
| con2_3,11       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_4,5        |                    0 |           0.00037037 |
+-----------------+----------------------+----------------------+
| con2_5,6        |                   -0 |           4.036e-05  |
+-----------------+----------------------+----------------------+
| con2_5,13       |                   -0 |           2e-08      |
+-----------------+----------------------+----------------------+
| con2_6,7        |                   -0 |           1.72e-05   |
+-----------------+----------------------+----------------------+
| con2_7,24       |                   -0 |           1.2e-07    |
+-----------------+----------------------+----------------------+
| con2_8,28       |                    0 |           1.019e-05  |
+-----------------+----------------------+----------------------+
| con2_9,36       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_10,11      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_10,32      |                    0 |           0.532667   |
+-----------------+----------------------+----------------------+
| con2_11,19      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_11,26      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_12,4       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_12,13      |                    0 |           0.00046772 |
+-----------------+----------------------+----------------------+
| con2_13,14      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_14,20      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_14,21      |                   -0 |           1.49e-06   |
+-----------------+----------------------+----------------------+
| con2_15,16      |                   -0 |           3.72e-06   |
+-----------------+----------------------+----------------------+
| con2_15,22      |                   -0 |           4.06e-06   |
+-----------------+----------------------+----------------------+
| con2_16,25      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_16,29      |                    0 |           2.58e-06   |
+-----------------+----------------------+----------------------+
| con2_17,2       |                    0 |           3.006e-05  |
+-----------------+----------------------+----------------------+
| con2_17,18      |                    0 |           0.104849   |
+-----------------+----------------------+----------------------+
| con2_18,10      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_19,12      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_19,20      |                    0 |           8.814e-05  |
+-----------------+----------------------+----------------------+
| con2_20,15      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_21,6       |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_21,22      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_22,7       |                    0 |           0.00060048 |
+-----------------+----------------------+----------------------+
| con2_22,23      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_23,25      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_24,8       |                   -0 |           0.211052   |
+-----------------+----------------------+----------------------+
| con2_24,23      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_25,8       |                    0 |           1e-08      |
+-----------------+----------------------+----------------------+
| con2_26,15      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_26,27      |                   -0 |           5.69e-06   |
+-----------------+----------------------+----------------------+
| con2_27,16      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_28,9       |                   -0 |           3.8e-06    |
+-----------------+----------------------+----------------------+
| con2_28,29      |                   -0 |           8.163e-05  |
+-----------------+----------------------+----------------------+
| con2_29,30      |                    0 |           0.00395717 |
+-----------------+----------------------+----------------------+
| con2_29,33      |                   -0 |           1e-08      |
+-----------------+----------------------+----------------------+
| con2_30,9       |                   -0 |           0.00018552 |
+-----------------+----------------------+----------------------+
| con2_30,35      |                   -0 |           3e-08      |
+-----------------+----------------------+----------------------+
| con2_31,10      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_31,34      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_32,27      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_32,33      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_33,34      |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_34,35      |                    0 |           0          |
+-----------------+----------------------+----------------------+
| con2_35,36      |                    0 |           0.00016729 |
+-----------------+----------------------+----------------------+
| con2_36,1       |                   -0 |           0          |
+-----------------+----------------------+----------------------+
| con2_37,1       |                    0 |           0          |
+-----------------+----------------------+----------------------+

Total absolute constraint violation using gurobi: 1.4264554265500032e-10
Total relative constraint violation using gurobi: 0.8556809435266113
*******************************************************************************

total_cost using gurobi: 21298.66844629898
solve_time using gurobi: 3600.4299939999996 

min_demand: 0.00026000000000000003 

Q_max: 0.03390999999999999 

eps: 1e-10 

*******************************************************************************

